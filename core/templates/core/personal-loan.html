{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Apply for Loan - Trust Bank</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        /* ====== SAME BASE STYLES ====== */
        :root {
            --bg: #f6f8fb;
            --accent: #0466c8;
            --accent-2: #00aaff;
            --muted: #6b7280;
            --card: #ffffff;
            --glass: rgba(255,255,255,0.6);
            --radius: 14px;
            --shadow: 0 10px 30px rgba(12,34,66,0.08);
            --glass-shadow: 0 6px 18px rgba(12,34,66,0.06);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }
        body {
            margin: 0;
            font-family: "Poppins", "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg, var(--bg), #eef4ff);
            color: #102a43;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.5;
        }
        
        a { color: var(--accent); text-decoration: none; }
        a:hover { opacity: 0.9; }
        
        /* ====== NAVBAR ====== */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 32px;
            z-index: 1200;
            background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
            backdrop-filter: blur(6px);
            border-bottom: 1px solid rgba(15,23,42,0.03);
        }
        
        .brand {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .brand img {
            width: 44px;
            height: 44px;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .brand h1 {
            font-size: 20px;
            margin: 0;
            font-weight: 700;
            color: #04293a;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-links a {
            font-weight: 600;
            color: #04293a;
            padding: 8px 10px;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .nav-links a:hover {
            background: rgba(4,102,200,0.06);
        }
        
        .nav-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 9px 16px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid rgba(4,102,200,0.12);
            color: var(--accent);
        }
        
        .btn-primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            box-shadow: 0 8px 22px rgba(4,102,200,0.12);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(4,102,200,0.2);
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 13px;
        }
        
        /* ====== LOAN APPLICATION PAGE STYLES ====== */
        .loan-apply-container {
            padding: 100px 32px 40px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .page-header {
            margin-bottom: 30px;
        }
        
        .page-header h1 {
            font-size: 32px;
            color: #04293a;
            margin-bottom: 10px;
        }
        
        .page-header p {
            color: var(--muted);
            font-size: 15px;
        }
        
        /* ====== APPLICATION STEPS ====== */
        .application-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .application-steps::before {
            content: '';
            position: absolute;
            top: 24px;
            left: 50px;
            right: 50px;
            height: 2px;
            background: rgba(4,102,200,0.1);
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(4,102,200,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            color: var(--accent);
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .step.active .step-number {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(4,102,200,0.2);
        }
        
        .step.completed .step-number {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .step-label {
            font-size: 14px;
            font-weight: 600;
            color: #04293a;
        }
        
        .step.active .step-label {
            color: var(--accent);
        }
        
        .step.completed .step-label {
            color: #10b981;
        }
        
        /* ====== APPLICATION FORM ====== */
        .application-form-container {
            background: var(--card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(11,22,44,0.04);
            margin-bottom: 40px;
        }
        
        .form-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 20px;
            color: #04293a;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(4,102,200,0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #04293a;
            font-size: 14px;
        }
        
        .form-label .required {
            color: #ef4444;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid rgba(4,102,200,0.1);
            border-radius: 10px;
            font-family: "Inter", sans-serif;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(4,102,200,0.1);
        }
        
        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230466c8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            cursor: pointer;
        }
        
        /* ====== LOAN CALCULATOR SECTION ====== */
        .loan-calculator-section {
            background: rgba(4,102,200,0.03);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(4,102,200,0.05);
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .calculator-inputs {
            padding-right: 40px;
            border-right: 1px solid rgba(4,102,200,0.1);
        }
        
        .calculator-results {
            padding-left: 40px;
        }
        
        .amount-container {
            position: relative;
        }
        
        .currency-symbol {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent);
            font-weight: 600;
            font-size: 18px;
        }
        
        .amount-input {
            padding-left: 40px !important;
            font-size: 18px;
            font-weight: 600;
        }
        
        .loan-amount-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(4,102,200,0.1);
            border-radius: 3px;
            outline: none;
            margin: 15px 0;
        }
        
        .loan-amount-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(4,102,200,0.3);
        }
        
        .amount-range {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--muted);
            margin-top: 5px;
        }
        
        .quick-amounts {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .amount-btn {
            padding: 8px 16px;
            border: 1px solid rgba(4,102,200,0.15);
            border-radius: 8px;
            background: white;
            color: var(--accent);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .amount-btn:hover {
            background: rgba(4,102,200,0.06);
        }
        
        .amount-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        /* ====== FEE CALCULATION ====== */
        .fee-calculation {
            background: linear-gradient(135deg, rgba(4,102,200,0.05), rgba(0,170,255,0.05));
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .fee-title {
            font-size: 18px;
            color: #04293a;
            margin-bottom: 20px;
        }
        
        .fee-breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .fee-item {
            background: rgba(255,255,255,0.8);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(4,102,200,0.08);
        }
        
        .fee-label {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 8px;
        }
        
        .fee-value {
            font-size: 24px;
            font-weight: 700;
            color: #04293a;
        }
        
        .fee-note {
            color: var(--muted);
            font-size: 13px;
            margin-top: 15px;
        }
        
        /* ====== PAYMENT SECTION ====== */
        .payment-section {
            background: var(--card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(11,22,44,0.04);
            margin-bottom: 40px;
        }
        
        .payment-instructions {
            background: rgba(4,102,200,0.03);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(4,102,200,0.05);
        }
        
        .instructions-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .instruction-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .instruction-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(4,102,200,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--accent);
            flex-shrink: 0;
        }
        
        .instruction-text {
            font-size: 14px;
            color: #04293a;
        }
        
        .payment-details {
            margin-top: 30px;
        }
        
        .payment-card {
            background: linear-gradient(135deg, #0466c8, #00aaff);
            color: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(4,102,200,0.2);
            margin-bottom: 25px;
        }
        
        .payment-amount {
            font-size: 42px;
            font-weight: 700;
            margin: 15px 0;
            text-align: center;
        }
        
        .payment-label {
            font-size: 14px;
            opacity: 0.9;
            text-align: center;
        }
        
        .wallet-info {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .wallet-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 8px;
        }
        
        .wallet-address {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            word-break: break-all;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .copy-wallet-btn {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .copy-wallet-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* ====== PROOF OF PAYMENT UPLOAD ====== */
        .proof-upload-section {
            margin-top: 40px;
            padding-top: 40px;
            border-top: 1px solid rgba(4,102,200,0.1);
        }
        
        .file-upload-area {
            border: 2px dashed rgba(4,102,200,0.2);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            background: rgba(4,102,200,0.02);
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
        }
        
        .file-upload-area:hover {
            border-color: var(--accent);
            background: rgba(4,102,200,0.04);
        }
        
        .file-upload-area.dragover {
            border-color: var(--accent);
            background: rgba(4,102,200,0.08);
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .upload-text h4 {
            margin: 0 0 8px;
            color: #04293a;
        }
        
        .upload-text p {
            color: var(--muted);
            margin: 0 0 15px;
            font-size: 14px;
        }
        
        .file-note {
            font-size: 12px;
            color: var(--muted);
            margin-top: 10px;
            text-align: center;
        }
        
        /* ====== FORM ACTIONS ====== */
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(4,102,200,0.1);
        }
        
        .action-note {
            font-size: 13px;
            color: var(--muted);
            margin-top: 15px;
            text-align: center;
        }
        
        /* ====== APPLICATION STATUS ====== */
        .status-section {
            background: rgba(4,102,200,0.03);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(4,102,200,0.05);
            text-align: center;
            display: none;
        }
        
        .status-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 36px;
            color: white;
        }
        
        .status-title {
            font-size: 24px;
            color: #04293a;
            margin-bottom: 15px;
        }
        
        .status-message {
            color: var(--muted);
            font-size: 16px;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* ====== MOBILE MENU ====== */
        .mobile-user-menu {
            display: none;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
        }
        
        /* ====== RESPONSIVE DESIGN ====== */
        @media (max-width: 1024px) {
            .calculator-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .calculator-inputs, .calculator-results {
                padding: 0;
                border: none;
            }
            
            .fee-breakdown {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .nav {
                padding: 14px 20px;
            }
            
            .nav-links {
                display: none;
            }
            
            .loan-apply-container {
                padding: 90px 20px 30px;
            }
            
            .application-steps::before {
                left: 40px;
                right: 40px;
            }
            
            .application-form-container, .payment-section {
                padding: 30px 25px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .application-steps {
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .step {
                flex: 0 0 calc(50% - 20px);
            }
            
            .form-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-actions .btn {
                width: 100%;
            }
            
            .mobile-user-menu {
                display: flex;
            }
            
            .desktop-user-menu {
                display: none;
            }
            
            .page-header h1 {
                font-size: 28px;
            }
            
            .payment-amount {
                font-size: 32px;
            }
            
            .instructions-list {
                gap: 12px;
            }
        }
        
        @media (max-width: 576px) {
            .application-steps::before {
                display: none;
            }
            
            .step {
                flex: 0 0 100%;
                margin-bottom: 20px;
            }
            
            .fee-calculation {
                padding: 25px 20px;
            }
            
            .fee-item {
                padding: 15px;
            }
            
            .fee-value {
                font-size: 20px;
            }
            
            .file-upload-area {
                padding: 30px 20px;
            }
            
            .payment-card {
                padding: 25px 20px;
            }
        }
        
        @media (max-width: 480px) {
            .nav {
                padding: 12px 16px;
            }
            
            .brand h1 {
                font-size: 18px;
            }
            
            .loan-apply-container {
                padding: 80px 16px 20px;
            }
            
            .application-form-container, .payment-section {
                padding: 25px 20px;
            }
            
            .section-title {
                font-size: 18px;
            }
            
            .quick-amounts {
                justify-content: center;
            }
        }
        
        /* Hamburger for mobile */
        .hamburger {
            display: none;
            cursor: pointer;
            width: 44px;
            height: 44px;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: transparent;
            border: none;
        }
        
        .hamburger div {
            width: 22px;
            height: 2px;
            background: #04293a;
            margin: 4px 0;
            transition: 0.2s;
        }
        
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <div class="nav">
        <div class="brand">
            <img src="https://images.pexels.com/photos/3183198/pexels-photo-3183198.jpeg?auto=compress&cs=tinysrgb&w=120&h=120&fit=crop" alt="Trust Bank logo">
            <h1>Trust Bank</h1>
        </div>
        
        <nav class="nav-links" id="navLinks">
            <a href="home.html">Home</a>
            <a href="dashboard.html">Dashboard</a>
            <a href="account.html">Accounts</a>
            <a href="transfer.html">Transfer</a>
            <a href="crypto.html">Crypto</a>
            <a href="personal-loan.html">Loans</a>
            <a href="help.html">Support</a>
        </nav>
        
        <div class="nav-actions">
            <div class="desktop-user-menu">
                <span style="color: var(--muted); font-size: 13px; margin-right: 10px;">Welcome, John</span>
                <button class="btn btn-sm btn-outline" onclick="location.href='profile.html'">Profile</button>
                <button class="btn btn-sm btn-primary" onclick="location.href='logout.html'">Logout</button>
            </div>
            
            <div class="mobile-user-menu">
                <div class="user-avatar">JD</div>
            </div>
            
            <button class="hamburger" id="hamburger" aria-label="Menu">
                <div></div><div></div><div></div>
            </button>
        </div>
    </div>
    
    <!-- LOAN APPLICATION CONTENT -->
    <div class="loan-apply-container">
        <!-- Header -->
        <div class="page-header">
            <h1>Apply for a Personal Loan</h1>
            <p>Complete your application in 3 simple steps</p>
        </div>
        
        <!-- Application Steps -->
        <div class="application-steps">
            <div class="step active" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">Loan Details</div>
            </div>
            
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">Pay Upfront Fee</div>
            </div>
            
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">Submit Proof</div>
            </div>
        </div>
        
        <!-- Application Form -->
        <div class="application-form-container" id="applicationForm">
            <div class="form-section">
                <div class="section-title">Personal Information</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Full Name <span class="required">*</span></label>
                        <input type="text" class="form-input" placeholder="John Michael Doe" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address <span class="required">*</span></label>
                        <input type="email" class="form-input" placeholder="john@example.com" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Phone Number <span class="required">*</span></label>
                        <input type="tel" class="form-input" placeholder="+1 (234) 567-8900" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Date of Birth <span class="required">*</span></label>
                        <input type="date" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Social Security Number <span class="required">*</span></label>
                        <input type="text" class="form-input" placeholder="XXX-XX-XXXX" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Annual Income <span class="required">*</span></label>
                        <div class="amount-container">
                            <span class="currency-symbol">$</span>
                            <input type="number" class="form-input amount-input" placeholder="50,000" min="10000" required>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Residential Address <span class="required">*</span></label>
                    <textarea class="form-textarea" placeholder="123 Main Street, City, State, ZIP Code" required></textarea>
                </div>
            </div>
            
            <!-- Loan Details Section -->
            <div class="form-section">
                <div class="section-title">Loan Details</div>
                
                <div class="loan-calculator-section">
                    <div class="calculator-grid">
                        <div class="calculator-inputs">
                            <div class="form-group">
                                <label class="form-label">Loan Amount Needed <span class="required">*</span></label>
                                <div class="amount-container">
                                    <span class="currency-symbol">$</span>
                                    <input type="number" class="form-input amount-input" id="loanAmountInput" placeholder="15,000" min="1000" max="50000" step="1000" required>
                                </div>
                                
                                <input type="range" class="loan-amount-slider" id="loanAmountSlider" min="1000" max="50000" value="15000" step="1000">
                                <div class="amount-range">
                                    <span>$1,000</span>
                                    <span>$50,000</span>
                                </div>
                                
                                <div class="quick-amounts">
                                    <button type="button" class="amount-btn" data-amount="5000">$5,000</button>
                                    <button type="button" class="amount-btn" data-amount="10000">$10,000</button>
                                    <button type="button" class="amount-btn active" data-amount="15000">$15,000</button>
                                    <button type="button" class="amount-btn" data-amount="25000">$25,000</button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Loan Purpose <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Select purpose</option>
                                    <option value="debt_consolidation">Debt Consolidation</option>
                                    <option value="home_improvement">Home Improvement</option>
                                    <option value="medical_expenses">Medical Expenses</option>
                                    <option value="wedding">Wedding</option>
                                    <option value="vacation">Vacation/Travel</option>
                                    <option value="education">Education</option>
                                    <option value="business">Business Investment</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Loan Term <span class="required">*</span></label>
                                <select class="form-select" id="loanTerm" required>
                                    <option value="12">12 months (1 year)</option>
                                    <option value="24">24 months (2 years)</option>
                                    <option value="36" selected>36 months (3 years)</option>
                                    <option value="48">48 months (4 years)</option>
                                    <option value="60">60 months (5 years)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="calculator-results">
                            <div class="fee-calculation">
                                <div class="fee-title">Upfront Fee Calculation</div>
                                
                                <div class="fee-breakdown">
                                    <div class="fee-item">
                                        <div class="fee-label">Loan Amount</div>
                                        <div class="fee-value" id="calculatedLoanAmount">$15,000</div>
                                    </div>
                                    
                                    <div class="fee-item">
                                        <div class="fee-label">Upfront Fee (20%)</div>
                                        <div class="fee-value" id="calculatedFee">$3,000</div>
                                    </div>
                                </div>
                                
                                <div class="payment-card" style="background: linear-gradient(135deg, #10b981, #34d399);">
                                    <div class="payment-label">Amount to Pay Now</div>
                                    <div class="payment-amount" id="amountToPay">$3,000</div>
                                    <div class="payment-label">PYUSD Payment Required</div>
                                </div>
                                
                                <p class="fee-note">
                                    * 20% upfront fee is required to process your loan application. 
                                    Remaining 80% will be disbursed after approval.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Additional Information</label>
                    <textarea class="form-textarea" placeholder="Tell us more about your financial situation and how you plan to use the loan..." rows="4"></textarea>
                </div>
            </div>
            
            <!-- Payment Section (Initially Hidden) -->
            <div class="payment-section" id="paymentSection" style="display: none;">
                <div class="section-title">Step 2: Pay Upfront Fee</div>
                
                <div class="payment-instructions">
                    <h4 style="margin: 0 0 20px; color: #04293a;">Payment Instructions</h4>
                    
                    <div class="instructions-list">
                        <div class="instruction-item">
                            <div class="instruction-number">1</div>
                            <div class="instruction-text">
                                <strong>Send exactly</strong> <span id="paymentAmountText" style="color: #0466c8; font-weight: 600;">$3,000</span> in PYUSD to the wallet address below
                            </div>
                        </div>
                        
                        <div class="instruction-item">
                            <div class="instruction-number">2</div>
                            <div class="instruction-text">
                                <strong>Network:</strong> PYUSD (PayPal USD) on Ethereum network
                            </div>
                        </div>
                        
                        <div class="instruction-item">
                            <div class="instruction-number">3</div>
                            <div class="instruction-text">
                                <strong>Include this Reference ID</strong> in the payment memo: 
                                <span id="referenceId" style="font-family: 'Courier New', monospace; color: #0466c8; font-weight: 600;">LN-2025-0487</span>
                            </div>
                        </div>
                        
                        <div class="instruction-item">
                            <div class="instruction-number">4</div>
                            <div class="instruction-text">
                                <strong>Upload proof of payment</strong> (screenshot or receipt) in the next step
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="payment-details">
                    <div class="payment-card">
                        <div class="payment-label">Payment Amount Required</div>
                        <div class="payment-amount" id="paymentDisplayAmount">$3,000</div>
                        <div class="payment-label">Pay in PYUSD Only</div>
                        
                        <div class="wallet-info">
                            <div class="wallet-label">Send PYUSD to this wallet address:</div>
                            <div class="wallet-address" id="walletAddress">
                                paypalwallet:0x8a7b3c9d2e1f5a6b4c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2
                            </div>
                            <button class="copy-wallet-btn" onclick="copyWalletAddress()">Copy Wallet Address</button>
                        </div>
                    </div>
                </div>
                
                <div class="action-note">
                    ‚ö†Ô∏è Do not close this page after payment. You'll need to upload proof in the next step.
                </div>
            </div>
            
            <!-- Proof Upload Section (Initially Hidden) -->
            <div class="proof-upload-section" id="proofSection" style="display: none;">
                <div class="section-title">Step 3: Submit Proof of Payment</div>
                
                <div class="form-group">
                    <label class="form-label">Upload Proof of Payment <span class="required">*</span></label>
                    <div class="file-upload-area" id="fileUploadArea">
                        <div class="upload-icon">üìé</div>
                        <div class="upload-text">
                            <h4>Upload Payment Receipt</h4>
                            <p>Drag & drop or click to upload screenshot of your PYUSD payment</p>
                            <button type="button" class="btn btn-outline" onclick="document.getElementById('proofFile').click()">Choose File</button>
                            <p class="file-note">Accepted formats: JPG, PNG, PDF. Max file size: 5MB</p>
                        </div>
                    </div>
                    <input type="file" id="proofFile" name="proof_of_payment" accept="image/*,application/pdf" style="display: none;" required>
                    <div id="fileInfo" style="display: none; margin-top: 15px; padding: 15px; background: rgba(4,102,200,0.05); border-radius: 10px; font-size: 14px;"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PYUSD Transaction ID <span class="required">*</span></label>
                    <input type="text" class="form-input" id="transactionIdInput" placeholder="Enter the transaction ID from your PYUSD payment" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Payment Date <span class="required">*</span></label>
                    <input type="date" class="form-input" id="paymentDate" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Additional Notes (Optional)</label>
                    <textarea class="form-textarea" placeholder="Add any notes about your payment..." rows="3"></textarea>
                </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-outline" id="backBtn" style="display: none;" onclick="goBackStep()">‚Üê Back</button>
                <button type="button" class="btn btn-primary" id="nextBtn" onclick="goToNextStep()">Continue to Payment ‚Üí</button>
                <button type="submit" class="btn btn-primary" id="submitBtn" style="display: none;" onclick="submitApplication()">Submit Application</button>
            </div>
            
            <div class="action-note">
                Your loan application will be reviewed by our admin team within 24 hours after payment verification.
            </div>
        </div>
        
        <!-- Application Status (Initially Hidden) -->
        <div class="status-section" id="statusSection">
            <div class="status-icon">‚úì</div>
            <div class="status-title">Application Submitted Successfully!</div>
            <div class="status-message">
                Thank you for applying for a loan with Trust Bank. Your application has been received and is pending admin approval. 
                We will notify you via email once your payment is verified and the loan is approved.
            </div>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn btn-outline" onclick="location.href='dashboard.html'">Go to Dashboard</button>
                <button class="btn btn-primary" onclick="location.href='loan-status.html'">Check Application Status</button>
            </div>
        </div>
    </div>
    
    <script>
        // Mobile menu toggle
        document.getElementById('hamburger').addEventListener('click', function() {
            const navLinks = document.getElementById('navLinks');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        });
        
        // Application Steps
        let currentStep = 1;
        const maxSteps = 3;
        
        // Form elements
        const applicationForm = document.getElementById('applicationForm');
        const paymentSection = document.getElementById('paymentSection');
        const proofSection = document.getElementById('proofSection');
        const statusSection = document.getElementById('statusSection');
        
        const backBtn = document.getElementById('backBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        
        // Loan Calculator Elements
        const loanAmountInput = document.getElementById('loanAmountInput');
        const loanAmountSlider = document.getElementById('loanAmountSlider');
        const calculatedLoanAmount = document.getElementById('calculatedLoanAmount');
        const calculatedFee = document.getElementById('calculatedFee');
        const amountToPay = document.getElementById('amountToPay');
        const paymentAmountText = document.getElementById('paymentAmountText');
        const paymentDisplayAmount = document.getElementById('paymentDisplayAmount');
        
        // Quick amount buttons
        document.querySelectorAll('.amount-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const amount = this.getAttribute('data-amount');
                loanAmountInput.value = amount;
                loanAmountSlider.value = amount;
                calculateFee();
            });
        });
        
        // Update loan amount from input
        loanAmountInput.addEventListener('input', function() {
            const amount = Math.min(50000, Math.max(1000, this.value));
            loanAmountSlider.value = amount;
            
            // Update quick amount buttons
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-amount') == amount) {
                    btn.classList.add('active');
                }
            });
            
            calculateFee();
        });
        
        // Update loan amount from slider
        loanAmountSlider.addEventListener('input', function() {
            loanAmountInput.value = this.value;
            calculateFee();
        });
        
        // Calculate 20% fee
        function calculateFee() {
            const amount = parseFloat(loanAmountInput.value) || 15000;
            const fee = amount * 0.20;
            
            calculatedLoanAmount.textContent = '$' + amount.toLocaleString();
            calculatedFee.textContent = '$' + fee.toLocaleString();
            amountToPay.textContent = '$' + fee.toLocaleString();
            paymentAmountText.textContent = '$' + fee.toLocaleString();
            paymentDisplayAmount.textContent = '$' + fee.toLocaleString();
        }
        
        // Initialize calculation
        calculateFee();
        
        // Generate reference ID
        function generateReferenceId() {
            const timestamp = Date.now().toString().slice(-6);
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `LN-${new Date().getFullYear()}-${timestamp}${random}`;
        }
        
        // Set reference ID
        document.getElementById('referenceId').textContent = generateReferenceId();
        
        // Set today's date as default for payment date
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('paymentDate').value = today;
        document.getElementById('paymentDate').min = today;
        
        // Step Navigation
        function goToNextStep() {
            if (currentStep === 1) {
                // Validate step 1
                if (!validateStep1()) {
                    alert('Please fill in all required fields in Step 1');
                    return;
                }
                
                // Show payment section
                paymentSection.style.display = 'block';
                proofSection.style.display = 'none';
                
                // Update steps
                step1.classList.remove('active');
                step1.classList.add('completed');
                step2.classList.add('active');
                
                // Update buttons
                backBtn.style.display = 'inline-flex';
                nextBtn.textContent = 'Continue to Proof Upload ‚Üí';
                nextBtn.onclick = goToNextStep;
                
                currentStep = 2;
                
            } else if (currentStep === 2) {
                // Show proof section
                paymentSection.style.display = 'none';
                proofSection.style.display = 'block';
                
                // Update steps
                step2.classList.remove('active');
                step2.classList.add('completed');
                step3.classList.add('active');
                
                // Update buttons
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-flex';
                
                currentStep = 3;
            }
        }
        
        function goBackStep() {
            if (currentStep === 2) {
                // Go back to step 1
                paymentSection.style.display = 'none';
                proofSection.style.display = 'none';
                
                // Update steps
                step1.classList.add('active');
                step1.classList.remove('completed');
                step2.classList.remove('active');
                
                // Update buttons
                backBtn.style.display = 'none';
                nextBtn.textContent = 'Continue to Payment ‚Üí';
                nextBtn.onclick = goToNextStep;
                
                currentStep = 1;
                
            } else if (currentStep === 3) {
                // Go back to step 2
                paymentSection.style.display = 'block';
                proofSection.style.display = 'none';
                
                // Update steps
                step2.classList.add('active');
                step2.classList.remove('completed');
                step3.classList.remove('active');
                
                // Update buttons
                backBtn.style.display = 'inline-flex';
                nextBtn.style.display = 'inline-flex';
                submitBtn.style.display = 'none';
                
                currentStep = 2;
            }
        }
        
        function validateStep1() {
            // Basic validation
            const requiredFields = applicationForm.querySelectorAll('[required]');
            let valid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#ef4444';
                    valid = false;
                } else {
                    field.style.borderColor = '';
                }
            });
            
            return valid;
        }
        
        // File upload handling
        const fileUploadArea = document.getElementById('fileUploadArea');
        const proofFile = document.getElementById('proofFile');
        const fileInfo = document.getElementById('fileInfo');
        
        fileUploadArea.addEventListener('click', () => proofFile.click());
        
        proofFile.addEventListener('change', function() {
            if (this.files.length > 0) {
                const file = this.files[0];
                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                const fileName = file.name;
                
                fileInfo.style.display = 'block';
                fileInfo.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Selected file:</strong> ${fileName}<br>
                            <span style="color: var(--muted); font-size: 12px;">Size: ${fileSize} MB ‚Ä¢ Type: ${file.type}</span>
                        </div>
                        <button type="button" style="color: #ef4444; background: none; border: none; cursor: pointer; font-size: 20px;" onclick="clearProofFile()">√ó</button>
                    </div>
                `;
                
                fileUploadArea.style.borderColor = '#10b981';
                fileUploadArea.style.background = 'rgba(16,185,129,0.05)';
            }
        });
        
        function clearProofFile() {
            proofFile.value = '';
            fileInfo.style.display = 'none';
            fileInfo.innerHTML = '';
            fileUploadArea.style.borderColor = 'rgba(4,102,200,0.2)';
            fileUploadArea.style.background = 'rgba(4,102,200,0.02)';
        }
        
        // Drag and drop for file upload
        fileUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUploadArea.classList.add('dragover');
        });
        
        fileUploadArea.addEventListener('dragleave', () => {
            fileUploadArea.classList.remove('dragover');
        });
        
        fileUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUploadArea.classList.remove('dragover');
            
            if (e.dataTransfer.files.length) {
                proofFile.files = e.dataTransfer.files;
                proofFile.dispatchEvent(new Event('change'));
            }
        });
        
        // Copy wallet address
        function copyWalletAddress() {
            const walletAddress = document.getElementById('walletAddress').textContent;
            navigator.clipboard.writeText(walletAddress).then(() => {
                alert('Wallet address copied to clipboard!');
            });
        }
        
        // Submit application
        function submitApplication() {
            // Validate proof section
            if (!proofFile.files.length) {
                alert('Please upload proof of payment');
                return;
            }
            
            const transactionId = document.getElementById('transactionIdInput').value.trim();
            if (!transactionId) {
                alert('Please enter the PYUSD transaction ID');
                return;
            }
            
            const confirmed = confirm('Submit your loan application? This action cannot be undone.');
            
            if (confirmed) {
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;
                
                // Simulate API call
                setTimeout(() => {
                    // Show success message
                    applicationForm.style.display = 'none';
                    statusSection.style.display = 'block';
                    
                    // Send email notification (simulated)
                    console.log('Sending admin notification for loan approval...');
                    
                    // Reset form after 5 seconds (for demo)
                    setTimeout(() => {
                        submitBtn.textContent = 'Submit Application';
                        submitBtn.disabled = false;
                    }, 5000);
                }, 2000);
            }
        }
        
        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            // Set max date for date of birth (18 years ago)
            const maxDate = new Date();
            maxDate.setFullYear(maxDate.getFullYear() - 18);
            document.querySelector('input[type="date"]').max = maxDate.toISOString().split('T')[0];
        });
    </script>
</body>
</html>